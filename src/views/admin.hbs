<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Панель администратора</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="main">
        <div class="upline">
    <button id="menu_button" onclick="toggleMenu()">☰</button>
</div>

<div class="dropdown-menu" id="dropdownMenu">
    <a href="/admin/menu">Действия с меню</a>
    <a href="/admin/orders">Действия с заказами</a>
</div>

<div class="maintext">
    <h1 id="h1">Панель администратора</h1>
</div>

<div class="switchmenu">
    {{#if (eq activeTab "menu")}}
        <div class="burgers">
            <h2>Добавить блюдо</h2>
            <form id="addDishForm">
                <label for="name">Название:</label>
                <input type="text" id="name" name="name" required><br><br>

                <label for="dish_category">Категория:</label>
                <input type="text" id="dish_category" name="dish_category" required><br><br>

                <label for="price">Цена:</label>
                <input type="number" id="price" name="price" required><br><br>

                <label for="calories">Калории:</label>
                <input type="number" id="calories" name="calories" required><br><br>

                <label for="description">Описание:</label>
                <textarea id="description" name="description" required></textarea><br><br>

                <button type="submit">Добавить</button>
            </form>
        </div>
    {{else if (eq activeTab "orders")}}
        <div class="burgers">
            <h2>Заказы</h2>
            <ul>
                <li>Заказ #1 <button>Подтвердить</button> <button>Отклонить</button></li>
                <li>Заказ #2 <button>Подтвердить</button> <button>Отклонить</button></li>
            </ul>
        </div>
    {{/if}}
</div>

<script>
    function toggleMenu() {
        const dropdownMenu = document.getElementById("dropdownMenu");
        dropdownMenu.classList.toggle("show");
    }

    document.getElementById("addDishForm").addEventListener("submit", async (event) => {
        event.preventDefault();

        const formData = new FormData(event.target);
        const dishData = Object.fromEntries(formData.entries());

        try {
            const response = await fetch("/admin/menu", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(dishData),
            });

            if (response.ok) {
                alert("Блюдо успешно добавлено!");
                event.target.reset();
            } else {
                alert("Ошибка при добавлении блюда");
            }
        } catch (error) {
            console.error("Ошибка:", error);
            alert("Ошибка при отправке запроса");
        }
    });
</script>
    </div>
</body>
</html>